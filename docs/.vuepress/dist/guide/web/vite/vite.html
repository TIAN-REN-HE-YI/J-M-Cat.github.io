<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>搭建第一个vite项目 | oMa-Note</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.dcc4ee40.css" as="style"><link rel="preload" href="/assets/js/app.e2bff319.js" as="script"><link rel="preload" href="/assets/js/2.461a35d8.js" as="script"><link rel="preload" href="/assets/js/1.cd2fd273.js" as="script"><link rel="preload" href="/assets/js/39.eec7c0eb.js" as="script"><link rel="prefetch" href="/assets/js/10.2d82d19d.js"><link rel="prefetch" href="/assets/js/11.343c0c0c.js"><link rel="prefetch" href="/assets/js/12.5aa2f51b.js"><link rel="prefetch" href="/assets/js/13.6702a836.js"><link rel="prefetch" href="/assets/js/14.78a292ea.js"><link rel="prefetch" href="/assets/js/15.1aeb39fe.js"><link rel="prefetch" href="/assets/js/16.080d0551.js"><link rel="prefetch" href="/assets/js/17.f9f7741c.js"><link rel="prefetch" href="/assets/js/18.fc93894c.js"><link rel="prefetch" href="/assets/js/19.59a8dd5e.js"><link rel="prefetch" href="/assets/js/20.0ec94e3e.js"><link rel="prefetch" href="/assets/js/21.7f8f7869.js"><link rel="prefetch" href="/assets/js/22.6b150793.js"><link rel="prefetch" href="/assets/js/23.6330420e.js"><link rel="prefetch" href="/assets/js/24.e6b397dd.js"><link rel="prefetch" href="/assets/js/25.188a61cf.js"><link rel="prefetch" href="/assets/js/26.d51f0b27.js"><link rel="prefetch" href="/assets/js/27.c4140e37.js"><link rel="prefetch" href="/assets/js/28.a9654436.js"><link rel="prefetch" href="/assets/js/29.1d5f1bee.js"><link rel="prefetch" href="/assets/js/3.91e05541.js"><link rel="prefetch" href="/assets/js/30.88a5dd21.js"><link rel="prefetch" href="/assets/js/31.d94b57f2.js"><link rel="prefetch" href="/assets/js/32.a675a5ec.js"><link rel="prefetch" href="/assets/js/33.482a8a76.js"><link rel="prefetch" href="/assets/js/34.b257cb19.js"><link rel="prefetch" href="/assets/js/35.1f4d9fa1.js"><link rel="prefetch" href="/assets/js/36.e418e207.js"><link rel="prefetch" href="/assets/js/37.fd45c989.js"><link rel="prefetch" href="/assets/js/38.8304d738.js"><link rel="prefetch" href="/assets/js/4.30b5960b.js"><link rel="prefetch" href="/assets/js/5.d4adad6c.js"><link rel="prefetch" href="/assets/js/6.2879de4f.js"><link rel="prefetch" href="/assets/js/7.dbef76d9.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d6ebca66.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dcc4ee40.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">oMa-Note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/web/vite/introduce.html" class="nav-link">
  vites
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/back/mySql/base.html" class="nav-link">
  mySql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tools" class="dropdown-title"><span class="title">Tools</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tools" class="mobile-dropdown-title"><span class="title">Tools</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/tools/git/introduce.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/guide/tools/vuePress/introduce/" class="nav-link">
  VuePress
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/J-M-Cat" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/web/vite/introduce.html" class="nav-link">
  vites
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/back/mySql/base.html" class="nav-link">
  mySql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tools" class="dropdown-title"><span class="title">Tools</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tools" class="mobile-dropdown-title"><span class="title">Tools</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/tools/git/introduce.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/guide/tools/vuePress/introduce/" class="nav-link">
  VuePress
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/J-M-Cat" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/guide/web/vite/introduce.html" class="sidebar-link">开始</a></li><li><a href="/guide/web/vite/pnpm.html" class="sidebar-link">pnpm</a></li><li><a href="/guide/web/vite/vite.html" aria-current="page" class="active sidebar-link">vite</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/web/vite/vite.html#搭建第一个vite项目" class="sidebar-link">搭建第一个vite项目</a></li><li class="sidebar-sub-header"><a href="/guide/web/vite/vite.html#plugin" class="sidebar-link">plugin</a></li><li class="sidebar-sub-header"><a href="/guide/web/vite/vite.html#base" class="sidebar-link">base</a></li><li class="sidebar-sub-header"><a href="/guide/web/vite/vite.html#resolve-alias-配置别名" class="sidebar-link">resolve.alias（配置别名）</a></li><li class="sidebar-sub-header"><a href="/guide/web/vite/vite.html#生产环境移除console配置" class="sidebar-link">生产环境移除console配置</a></li><li class="sidebar-sub-header"><a href="/guide/web/vite/vite.html#跨域代理配置" class="sidebar-link">跨域代理配置</a></li><li class="sidebar-sub-header"><a href="/guide/web/vite/vite.html#env环境配置" class="sidebar-link">env环境配置</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="搭建第一个vite项目"><a href="#搭建第一个vite项目" class="header-anchor">#</a> 搭建第一个vite项目</h2> <p>使用PNPM:</p> <div class="language- extra-class"><pre class="language-text"><code>pnpm create vite
</code></pre></div><p>你还可以通过附加的命令行选项直接指定项目名称和你想要使用的模板。例如，要构建一个 Vite + Vue 项目，运行:</p> <div class="language- extra-class"><pre class="language-text"><code>pnpm create vite my-vue-app --template vue
</code></pre></div><p>命令行界面</p> <p>在安装了 Vite 的项目中，可以在 npm scripts 中使用 vite 可执行文件，或者直接使用 npx vite 运行它。下面是通过脚手架创建的 Vite 项目中默认的 npm scripts：</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;scripts&quot;: {
    &quot;dev&quot;: &quot;vite&quot;, // 启动开发服务器，别名：`vite dev`，`vite serve`
    &quot;build&quot;: &quot;vite build&quot;, // 为生产环境构建产物
    &quot;preview&quot;: &quot;vite preview&quot; // 本地预览生产构建产物
  }
}
</code></pre></div><h2 id="plugin"><a href="#plugin" class="header-anchor">#</a> plugin</h2> <h3 id="支持vue"><a href="#支持vue" class="header-anchor">#</a> 支持vue</h3> <div class="language- extra-class"><pre class="language-text"><code>import { defineConfig } from 'vite';
import { vue } from '@vitejs/plugin-vue';

export defaut defineConfig({
  plugins: [
    vue(),
  ]
})
</code></pre></div><h3 id="plugin-通用插件"><a href="#plugin-通用插件" class="header-anchor">#</a> plugin 通用插件</h3> <p><code>@vitejs/plugin-legacy</code></p> <p>说明：兼容老版本浏览器</p> <div class="language- extra-class"><pre class="language-text"><code>import { defineConfig } from 'vite';
import legacy from '@vitejs/plugin-legacy'

export defaut defineConfig({
  plugins: [
    legacy({
      targets: ['defaults', 'not IE 11'],  // 默认 不支持 ie11
    }),
  ]
})
</code></pre></div><p><a href="https://github.com/vitejs/awesome-vite" target="_blank" rel="noopener noreferrer">更多 Vite 资源<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="base"><a href="#base" class="header-anchor">#</a> base</h2> <ul><li>类型： string</li> <li>默认： /</li></ul> <p>开发或生产环境服务的公共基础路径。合法的值包括以下几种：</p> <ul><li>绝对 URL 路径名，例如 /foo/</li> <li>完整的 URL，例如 https://foo.com/</li> <li>空字符串或 ./（用于嵌入形式的开发）</li></ul> <div class="language- extra-class"><pre class="language-text"><code>import { defineConfig } from 'vite';

export defaut defineConfig({
  base: './'
})
</code></pre></div><h2 id="resolve-alias-配置别名"><a href="#resolve-alias-配置别名" class="header-anchor">#</a> resolve.alias（配置别名）</h2> <ul><li>类型：Record&lt;string, string&gt; | Array&lt;{ find: string | RegExp, replacement: string, customResolver?: ResolverFunction |ResolverObject }&gt;</li></ul> <p>将会被传递到 @rollup/plugin-alias 作为 entries 的选项。也可以是一个对象，或一个 { find, replacement, customResolver } 的数组。</p> <p><strong>当使用文件系统路径的别名时，请始终使用绝对路径。相对路径的别名值会原封不动地被使用，因此无法被正常解析。</strong></p> <div class="language- extra-class"><pre class="language-text"><code>import { defineConfig } from 'vite';
import { resolve } from 'path'; // resolve 总能返回一个相当于当前工作目录的绝对路径

export defaut defineConfig({
  resolve: {
    alias: {
      '@': resolve(__dirname, './src')
    }
  }
})
</code></pre></div><h2 id="生产环境移除console配置"><a href="#生产环境移除console配置" class="header-anchor">#</a> 生产环境移除console配置</h2> <h3 id="build-minify"><a href="#build-minify" class="header-anchor">#</a> build.minify</h3> <ul><li>类型： boolean | 'terser' | 'esbuild'</li> <li>默认： 'esbuild'</li></ul> <p>设置为 false 可以禁用最小化混淆，或是用来指定使用哪种混淆器。默认为 Esbuild，它比 terser 快 20-40 倍，压缩率只差 1%-2%。Benchmarks</p> <p>注意，在 lib 模式下使用 'es' 时，build.minify 选项不会缩减空格，因为会移除掉 pure 标注，导致破坏 tree-shaking。</p> <p>当设置为 'terser' 时必须先安装 Terser。</p> <div class="language- extra-class"><pre class="language-text"><code>import { defineConfig } from 'vite';

// minify 默认设置 Esbuild
// 使用 terserOptions 需将 minify 配置为 terser，否则 terserOptions 不生效

export defaut defineConfig({
  build: {
    minify: 'terser',
    terserOptions: {
      // 生产环境去除调试
      compress: {
        drop_console: true,
        drop_debugger: true,
      }
    }
  }
})
</code></pre></div><h2 id="跨域代理配置"><a href="#跨域代理配置" class="header-anchor">#</a> 跨域代理配置</h2> <h3 id="server-proxy"><a href="#server-proxy" class="header-anchor">#</a> server.proxy</h3> <ul><li>类型： Record&lt;string, string | ProxyOptions&gt;</li></ul> <p>为开发服务器配置自定义代理规则。期望接收一个 { key: options } 对象。任何请求路径以 key 值开头的请求将被代理到对应的目标。如果 key 值以 ^ 开头，将被识别为 RegExp。configure 选项可用于访问 proxy 实例。</p> <p>请注意，如果使用了非相对的 基础路径 base，则必须在每个 key 值前加上该 base。</p> <div class="language- extra-class"><pre class="language-text"><code>import { defineConfig } from 'vite';

export defaut defineConfig({
  server: {
    proxy: {
      '/api': {
        target: &quot;http://localhost:4567&quot;,
        changeOrigin: true,
        rewrite: (path) =&gt; path.replace(/^\/api/, ''),
      }
    }
  }
})
</code></pre></div><h2 id="env环境配置"><a href="#env环境配置" class="header-anchor">#</a> env环境配置</h2> <p>env文件用于切换不同环境配置的参数</p> <p>创建<code>.env.development</code>文件</p> <div class="language- extra-class"><pre class="language-text"><code>VITE_BASE_PATH: '/api'  // 开发环境路径
</code></pre></div><p>创建<code>.env.production</code>文件</p> <div class="language- extra-class"><pre class="language-text"><code>VITE_BASE_PATH: 'http://1.1.1.1'  // 生产环境路径
</code></pre></div><p>获取配置参数
<code>import meta.env.VITE_xxx</code></p> <p>配置更多环境:</p> <p><code>.env.xxx</code></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/web/vite/pnpm.html" class="prev">
        pnpm
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e2bff319.js" defer></script><script src="/assets/js/2.461a35d8.js" defer></script><script src="/assets/js/1.cd2fd273.js" defer></script><script src="/assets/js/39.eec7c0eb.js" defer></script>
  </body>
</html>
